option_settings:
  aws:elasticbeanstalk:application:environment:
    NODE_ENV: production
    PORT: 8081
    FRONTEND_PORT: 3000
    PRODUCTION_URL: http://localhost:8081
    SUPABASE_URL: ${SUPABASE_URL}
    SUPABASE_KEY: ${SUPABASE_KEY}
  aws:elasticbeanstalk:environment:proxy:staticfiles:
    /static: static
  aws:elasticbeanstalk:container:nodejs:
    NodeVersion: 18.20.0
    NodeCommand: "npm start"
    NPMUseQuiet: true
    NPMInstallOptions: "--legacy-peer-deps"

container_commands:
  01_npm_install:
    command: "cd backend && npm install --legacy-peer-deps"
  02_start_server:
    command: "cd backend && npm start"